<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>รหัสนักศึกษาที่ยังไม่ชำระเงิน</title>
  <style>
      
body {
  margin: 0;
  font-family: Tahoma, sans-serif;
  font-size: 14px;
  background-color: #ffffff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* ย้ายหัวข้อไปด้านบน */
  min-height: 100vh;
  padding-top: 40px; /* เว้นระยะจากบน */
  text-align: center;
}

h1 {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 30px;
}

ul {
  list-style-type: decimal;
  padding-left: 50px;
  text-align: left;
  max-width: 400px;
  width: 90%;
}

li {
  margin-bottom: 8px;
}

a.back-link {
  display: block;
  margin-top: 20px;
  color: #1c2c53;
  text-decoration: none;
  font-weight: bold;
  font-size: 14px;
}

a.back-link:hover {
  text-decoration: underline;
}

    .error {
      color: red;
      margin-top: 10px;
    }
  </style>
</head>
<body>


  <h1>นักศึกษาที่ยังไม่ชำระเงิน</h1>
  <ul id="studentList"></ul>
  <a class="back-link" href="index.html">กลับสู่หน้าหลัก</a>

  <script>
        const apiUrl = 'http://localhost:3000';

        async function fetchUnpaidStudents() {
            try {
                const studentsResponse = await fetch(`${apiUrl}/students`);
                const allStudents = await studentsResponse.json();

                const paidResponse = await fetch(`${apiUrl}/paid`);
                const paidStudentsData = await paidResponse.json();
                const paidStudentIds = paidStudentsData.map(s => s.id);

                const unpaidStudents = allStudents.filter(id => !paidStudentIds.includes(id));

                const listElement = document.getElementById('unpaidList');
                listElement.innerHTML = '';
                unpaidStudents.forEach(id => {
                    const listItem = document.createElement('li');
                    listItem.textContent = id;
                    listElement.appendChild(listItem);
                });
            } catch (error) {
                console.error('เกิดข้อผิดพลาด:', error);
            }
        }

        window.onload = fetchUnpaidStudents;
    </script>
</body>
</html>

